<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Payment</title>
<style>
body { 
    font-family:'Poppins',sans-serif; 
    background:#f0f8ff; 
    background: url('image.png') no-repeat center center;
    background-size: cover; 
    margin:0; 
    display:flex; 
    justify-content:center; 
    align-items:center; 
    height:100vh; 
}
.container { 
    background:#fff; 
    padding:40px; 
    border-radius:15px; 
    box-shadow:0 10px 30px rgba(0,0,0,0.1); 
    width:100%; 
    max-width:500px; 
    text-align:center; 
}
h1 { color:#0056b3; margin-bottom:20px; }
input { width:100%; padding:12px; margin:8px 0; border-radius:8px; border:1px solid #ccc; }
button { padding:15px; width:100%; border:none; border-radius:8px; background:#0056b3; color:#fff; font-weight:600; cursor:pointer; }
button:hover { background:#004085; }
#success-message { display:none; color:#27ae60; margin-bottom:20px; font-weight:600; }
#booking-id { font-weight:700; color:#0056b3; margin-top:10px; display:block; }
</style>
</head>
<body>
<div class="container">
    <h1>Payment Information</h1>
    <div id="success-message">
        Payment Successful!<br>
        Booking ID: <span id="booking-id"></span>
    </div>
    <form id="payment-form">
        <label>Card Number</label><br>
        <input type="text" id="card-number" placeholder="0000 0000 0000 0000" required><br><br>
        <label>Cardholder Name</label><br>
        <input type="text" id="card-name" required><br><br>
        <label>Expiry Date (MM/YY)</label><br>
        <input type="text" id="expiry" placeholder="MM/YY" required><br><br>
        <label>CVV</label><br>
        <input type="text" id="cvv" required><br><br>
        <button type="submit">Pay Now</button>
    </form>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('payment-form');
    const successMessage = document.getElementById('success-message');
    const bookingIdEl = document.getElementById('booking-id');
    const flight = JSON.parse(localStorage.getItem('selectedFlight'));

    form.addEventListener('submit', (e) => {
        e.preventDefault();

        if(!flight){
            alert('No flight selected! Please go back and select a flight.');
            return;
        }

        const bookingId = 'SW' + Date.now();

        const trips = JSON.parse(localStorage.getItem('trips')) || [];
        trips.push({ bookingId, from: flight.origin, to: flight.destination, date: flight.date, flightNumber: flight.flightNumber });
        localStorage.setItem('trips', JSON.stringify(trips));
        localStorage.setItem('lastBookingId', bookingId);

        form.style.display = 'none';
        bookingIdEl.textContent = bookingId;
        successMessage.style.display = 'block';

        setTimeout(() => { window.location.href = 'trips.html'; }, 6000);
    });
});
</script>
</body>
</html>
